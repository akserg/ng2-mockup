/**
 * Tea Regata
 *
 * Copyrighted 2016 by Sergey Akopkokhyants, MIT.
 */
function initMap(){var a=document.getElementById("map");map=new google.maps.Map(a,{center:new google.maps.LatLng(pointCtr.lat,pointCtr.lng),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP}),$.ajax({url:"data/waypoints.json",dataType:"json",success:parsWaypoints}),$.ajax({url:"data/members.csv",dataType:"text",success:parseMembers})}function parsWaypoints(a){$.each(a.Waypoints,function(a,t){teaPathPoints.push(t)}),animateTheWay()}function animateTheWay(){var a={path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:3,strokeColor:"blue"},t=new google.maps.Polyline({path:teaPathPoints,strokeColor:"#0000ff",strokeOpacity:1,strokeWeight:.1,icons:[{icon:a,offset:"100%"}],map:map});animateWay(t)}function animateWay(a){var t=0;window.setInterval(function(){t=(t+1)%200;var e=a.get("icons");e[0].offset=t/2+"%",a.set("icons",e)},40)}function parseMembers(a){var t=$.csv.toObjects(a);$.each(t,function(a,t){var e=Math.round(t.Progress/100*teaPathPoints.length),o=teaPathPoints[e];marker=new google.maps.Marker({position:o,animation:google.maps.Animation.DROP,map:map,title:t.Name,icon:"data/"+t.Image})})}var pointCtr={lat:-34.12537033,lng:18.44339006},teaPathPoints=[],map;